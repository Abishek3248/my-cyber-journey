# Putting It All Together

## Introduction
- In this module, we connect all the concepts from the previous lessons to understand the complete process of how websites work.
- When you request a webpage in your browser, multiple processes happen behind the scenes:
- Your computer first needs the server’s IP address, obtained via DNS.
- It then communicates with the server using the HTTP protocol.
- The server responds with resources such as HTML, JavaScript, CSS, and images.
- Finally, your browser processes these resources to correctly render the webpage.
- Additionally, there are other components that optimize performance, enhance security, and provide extra functionality for the web.


## Other Components

### Concepts Learned
- Websites rely on additional components to handle high traffic, optimize delivery, and enhance security.
- Load balancers distribute incoming requests across multiple servers to ensure availability and performance.
- CDNs (Content Delivery Networks) host static files globally to reduce latency and server load.
- Databases store and retrieve website data, from simple files to complex clustered systems.
- WAFs (Web Application Firewalls) protect web servers by detecting attacks and limiting suspicious traffic.

### Explanation
**Load Balancers:**
- Handle high-traffic websites by forwarding requests to multiple servers. Use algorithms like:
- Round-robin: Distributes requests sequentially among servers.
- Weighted: Sends requests to the least busy server based on current load.
- Perform health checks to ensure servers are responsive; unresponsive servers are temporarily removed from rotation.
**CDNs:**
- Host static website files (JS, CSS, images, videos) across global servers.
- Requests are routed to the nearest server to reduce latency and improve load times.
**Databases:**
- Web servers communicate with databases to store and retrieve user data.
- Databases range from simple text files to complex clusters for speed and resilience.
- Common examples: MySQL, MSSQL, MongoDB, Postgres.
**WAFs:**
- Sit between users and the web server to analyze incoming requests.
- Detect malicious patterns, bots, and excessive requests.
- Implement rate limiting to block excessive traffic and prevent attacks.

### Notes
- Load balancers ensure both performance and failover.
- CDNs improve user experience by serving files from geographically closer servers.
- Database choice affects performance, scalability, and resilience.
- WAFs are critical for security, blocking attacks before they reach the server.


## How Webservers Work

### Concepts Learned
- A web server listens for connections and delivers web content via the HTTP protocol.
- Common web server software includes Apache, Nginx, IIS, NodeJS.
- Virtual hosts allow multiple websites on the same server using hostnames from HTTP headers.
- Static content never changes (images, CSS, JS, static HTML), served directly from the server.
- Dynamic content changes based on requests and is generated by backend processing.
- Backend languages like PHP, Python, Ruby, NodeJS, Perl handle server-side logic, interact with databases, and generate dynamic responses.

### Explanation
**Web servers deliver files from their root directory:**
- Linux: /var/www/html (Apache/Nginx)
- Windows: C:\inetpub\wwwroot (IIS)
- Virtual hosts map domain names to directories, e.g., one.com → /var/www/website_one.
- Static content is served as-is. Dynamic content is generated via backend logic before sending HTML to the client.
- Backend scripts process user input, interact with databases, and generate customized responses. The client sees only the resulting HTML, not the backend code.

### Notes
- Virtual hosts allow unlimited websites on a single server.
- Backend scripts are not visible to clients; only processed output is sent.
- Dynamic content opens up potential security vulnerabilities if not handled properly.
**Example PHP dynamic page:**
<html>
<body>
Hello <?php echo $_GET["name"]; ?>
</body>
</html>
Request: http://example.com/index.php?name=adam → Output: <html><body>Hello adam</body></html>
- Understanding server-side vs client-side helps in assessing web security risks.



## Practical

### Concepts Learned
- Learned the step-by-step flow of a web request from entering a URL to receiving the website content.
- Reinforced the role of DNS, web servers, HTTP requests, and responses in delivering web pages.
- Understood how load balancers, CDNs, WAFs, and databases fit into the process.

### Explanation
**When a user requests a website:**
- URL Entry: The browser receives a URL and determines the scheme (HTTP/HTTPS), host, port, and path.
- DNS Lookup: The browser queries a DNS server to resolve the domain to an IP address.
- TCP Connection: The browser establishes a TCP connection to the server at the resolved IP and port.
- HTTP Request: The browser sends an HTTP request to the server, including headers and cookies as needed.
- Load Balancer (if any): If the server uses a load balancer, the request is directed to the least busy or appropriate server.
- Web Server Processing: The web server checks for static or dynamic content, processes backend scripts if necessary, and retrieves any required data from databases.
- WAF Checks: Web Application Firewall inspects requests for malicious patterns and rate-limits if needed.
- Server Response: The server sends back an HTTP response containing status code, headers, and the requested content (HTML, CSS, JS, images).
- CDN: Static content may be served from a CDN closer to the user for faster delivery.
- Browser Rendering: The browser parses the response, executes JavaScript, applies CSS, and renders the page for the user.
- Page Fully Loaded: Any additional resources (images, scripts, fonts) are fetched as needed, completing the web page display.

### Notes
- DNS caching can speed up repeated requests.
- HTTPS encrypts traffic between browser and server.
- Frontend vs Backend: The browser only sees the frontend; backend processes are hidden.
- Request Headers carry metadata; cookies maintain session state.
- Dynamic Content is generated on the server based on requests; static content is served as-is.
- Intermediaries like load balancers, CDNs, and WAFs optimize performance and security.


## Key Takeaways
- Web requests involve multiple components working together: DNS, TCP/IP, HTTP/HTTPS, web servers, databases, CDNs, load balancers, and WAFs.
- The browser initiates a request via a URL, which is resolved to an IP address using DNS.
- HTTP requests carry methods, headers, and cookies; responses include status codes, headers, and content.
- Frontend delivers content and interactivity to the user, while backend handles dynamic content, databases, and server-side processing.
- Security measures like HTTPS, WAFs, and proper input handling protect web applications from attacks.
- -Performance enhancements like CDNs and load balancers improve availability, speed, and resilience.
- Understanding the full request-response flow is essential for both web development and web security assessments.
